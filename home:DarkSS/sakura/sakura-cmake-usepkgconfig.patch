--- CMakeLists.txt.orig	2008-11-07 23:08:08.000000000 +0100
+++ CMakeLists.txt	2008-11-10 17:26:33.000000000 +0100
@@ -7,21 +7,9 @@
 SET (VERSION "2.3.2")
 
 
-INCLUDE (FindPkgConfig)
-
-IF (NOT PKG_CONFIG_FOUND)
-	MESSAGE (FATAL_ERROR "pkg-config not found...")
-ENDIF (NOT PKG_CONFIG_FOUND)
-
-pkg_check_modules (GTK REQUIRED gtk+-2.0>=2.10)
-IF (NOT GTK_FOUND)
-	MESSAGE(FATAL_ERROR "You don't seem to have gtk >= 2.10 development libraries installed...")
-ENDIF (NOT GTK_FOUND)
-
-pkg_check_modules (VTE REQUIRED vte>=0.11)
-IF (NOT VTE_FOUND)
-	MESSAGE(FATAL_ERROR "You don't seem to have vte >= 0.11 development libraries installed...")
-ENDIF (NOT VTE_FOUND)
+INCLUDE (UsePkgConfig)
+PKGCONFIG(gtk+-2.0 GTK_INCLUDE_DIRS GTK_LIBRARY_DIRS GTK_LIBRARIES GTK_CFLAGS)
+PKGCONFIG(vte VTE_INCLUDE_DIRS VTE_LIBRARY_DIRS VTE_LIBRARIES VTE_CFLAGS)
 
 ADD_DEFINITIONS (-DVERSION=\\\"${VERSION}\\\")
 ADD_DEFINITIONS (-DDATADIR=\\\"${CMAKE_INSTALL_PREFIX}/share\\\")
@@ -34,6 +22,8 @@
 ENDIF (${CMAKE_BUILD_TYPE} MATCHES "Debug")
 
 INCLUDE_DIRECTORIES (. ${GTK_INCLUDE_DIRS} ${VTE_INCLUDE_DIRS})
+ADD_DEFINITIONS (${GTK_CFLAGS})
+ADD_DEFINITIONS (${VTE_CFLAGS})
 LINK_DIRECTORIES (${GTK_LIBRARY_DIRS} ${VTE_LIBRARY_DIRS})
 LINK_LIBRARIES (${GTK_LIBRARIES} ${VTE_LIBRARIES})
 ADD_EXECUTABLE (sakura src/sakura.c)
